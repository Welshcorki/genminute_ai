
{% extends "layout.html" %}

{% block title %}새 회의록 작성{% endblock %}

{% block content %}
<main class="content-panel">
    <header class="content-header">
        <input type="text" name="title" form="upload-form" placeholder="제목을 입력 해주세요" class="title-input">
    </header>
    {% if error %}
        <div class="flash-error">{{ error }}</div>
    {% endif %}
    <form class="meeting-form" id="upload-form" method="POST" action="{{ url_for('upload_and_process') }}" enctype="multipart/form-data" novalidate>
        <div class="form-group">
            <div class="drop-zone" id="drop-zone">
                <input type="file" id="audio-file-input" name="audio_file" accept=".wav,.mp3,.m4a,.flac,.mp4" style="display: none;" required>
                <div class="drop-zone-icon">&#128229;</div>
                <p>음성 파일을 여기로 끌어놓으시면 업로드가 시작됩니다</p>
                <button type="button" class="btn-primary" id="upload-button">파일 선택</button>
                <p id="file-name-display" class="file-name-display"></p>
                <p class="file-types-small">(파일형식: .wav, .mp3, .m4a, .flac, .mp4)</p>
            </div>
            <button type="submit" id="submit-button" class="btn-primary" style="display: none; margin-top: 1.5rem; width: 100%;">노트 생성</button>
        </div>
    </form>

    <!-- 프로그레스바 모달 -->
    <div id="progress-modal" class="progress-modal">
        <div class="progress-modal-content">
            <div class="progress-icon">🎤</div>
            <h2>음성 인식 중...</h2>
            <p id="progress-status">파일을 업로드하고 있습니다</p>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar">
                    <span class="progress-text" id="progress-text">0%</span>
                </div>
            </div>
            <p class="progress-tip">평균 처리 시간: 2-3분</p>
        </div>
    </div>
</main>
{% endblock %}
